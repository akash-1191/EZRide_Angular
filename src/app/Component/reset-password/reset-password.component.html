<!-- Loader Spinner -->
<div *ngIf="loading" class="fixed inset-0 flex items-center justify-center bg-black/30 z-50">
  <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"></div>
</div>

<section class="bgimagelogin h-screen flex items-center justify-center px-4">
  <form [formGroup]="resetForm" (ngSubmit)="submit()"
    class="relative animate-fade-in backdrop-blur-lg bg-white/10 border border-white/20 shadow-2xl rounded-3xl p-8 w-full max-w-sm transition-all duration-300 hover:shadow-[0_0_30px_rgba(255,255,255,0.2)]">

    <!-- Logo -->
    <div class="flex justify-center mb-6">
      <img src="../../../assets/image/LOGO.png" alt="Logo"
        class="w-16 h-16 rounded-full shadow-md" />
    </div>

    <!-- Title -->
    <h2 class="text-3xl font-bold text-center mb-3 tracking-wide text-white drop-shadow-lg">
      Reset Password
    </h2>

    <p class="text-center text-sm text-gray-300 mb-6">
      Enter your new password below
    </p>

    <!-- New Password -->
    <div class="mb-5 relative">
      <input
        [type]="showPassword ? 'text' : 'password'"
        formControlName="newPassword"
        class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/70
        focus:outline-none focus:ring-2 focus:ring-white/60"
        placeholder="New Password" />

      <button type="button"
        (click)="showPassword = !showPassword"
        class="absolute right-3 top-1/2 -translate-y-1/2 text-white">
        <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
      </button>

      <span class="text-red-500 text-sm"
        *ngIf="resetForm.get('newPassword')?.touched && resetForm.get('newPassword')?.invalid">
        Minimum 6 characters required
      </span>
    </div>

    <!-- Confirm Password -->
    <div class="mb-6">
      <input
        type="password"
        formControlName="confirmPassword"
        class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/70
        focus:outline-none focus:ring-2 focus:ring-white/60"
        placeholder="Confirm Password" />

      <span class="text-red-500 text-sm"
        *ngIf="resetForm.errors?.['mismatch']">
        Passwords do not match
      </span>
    </div>

    <!-- Submit Button -->
    <button type="submit" [disabled]="resetForm.invalid"
      [ngClass]="resetForm.invalid 
        ? 'bg-gray-400 cursor-not-allowed' 
        : 'bg-gradient-to-r from-[#0f2027] via-[#203a43] to-[#2c5364] hover:brightness-110 cursor-pointer'"
      class="w-full py-2 rounded-lg text-white font-semibold transition-all duration-300">
      Reset Password
    </button>

    <!-- Success / Error Message -->
    <p *ngIf="message"
      class="text-green-400 text-sm text-center mt-4">
      {{ message }}
    </p>

    <!-- Back to Login -->
    <div class="mt-5 text-center text-sm text-white">
      <p>
        Go back to
        <span routerLink="/login"
          class="font-semibold underline hover:text-gray-300 transition cursor-pointer">
          Login
        </span>
      </p>
    </div>

  </form>
</section>
